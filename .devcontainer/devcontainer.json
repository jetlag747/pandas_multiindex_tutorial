{
  "name": "Python UV Environment",
  "build": {
    // On force le chemin explicite relatif au dossier .devcontainer
    "dockerfile": "./Dockerfile",
    // On s'assure que le contexte est bien le dossier .devcontainer
    "context": "."
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.vscode-pylance",
        "charliermarsh.ruff"
      ],
      "settings": {
        "python.defaultInterpreterPath": "${workspaceFolder}/.venv/bin/python",
        "python.terminal.activateEnvironment": true,
        "python.analysis.extraPaths": ["${workspaceFolder}/src"]
      }
    }
  },
  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/project,type=bind",
  "workspaceFolder": "/workspaces/project",
  "postCreateCommand": "bash -c 'if [ ! -f pyproject.toml ]; then uv init --python 3.12; fi && uv sync'",
  "remoteUser": "root"
}
